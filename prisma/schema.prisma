datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id        Int      @id @default(autoincrement())
  role      String
  user_id   String   @unique
  google_id Int?     @unique
  username  String   @unique
  email     String?  @unique
  password  String?
  otp       String?  // Field for OTP

  accounts    Account[]
  profile     UserProfile?
}

model Account {
  id                 Int       @id @default(autoincrement())
  userId             Int
  provider           String
  providerAccountId  String
  refresh_token      String?   @map("refreshToken")
  access_token       String?   @map("accessToken")
  expires_at         Int?
  token_type         String?
  scope              String?
  id_token           String?
  session_state      String?
  user               User      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
}

model UserProfile {
  id           Int     @id @default(autoincrement())
  userId       Int     @unique // Foreign key referencing User table
  name         String?
  profile_img  String? // URL or path for profile picture
  header_img   String? // URL or path for header image (cover photo)
  posts        Int     @default(0)
  followers    Int     @default(0)
  following    Int     @default(0)
  user         User    @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
}
